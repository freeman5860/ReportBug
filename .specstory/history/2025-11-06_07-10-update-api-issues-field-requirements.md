<!-- Generated by SpecStory -->

# Update api/issues field requirements (2025-11-06 15:10:58)

_**User**_

api/issues这个接口，现在所有字段都是必填的，但其实除了description，其他都可以不填，去掉category

---

_**Assistant**_



---

我来帮你修改 `api/issues` 接口，让除了 `description` 外的字段都变为可选，并移除 `category` 字段。

让我先查看相关文件：

---

Read file: undefined

---

Read file: undefined

---

Read file: undefined

---



---

我来帮你修改接口，让除了 `description` 外的字段都变为可选，并移除 `category` 字段。先查看相关的存储和导出逻辑：

---

Read file: undefined

---

Read file: undefined

---



---

现在我来修改相关文件，让除了 `description` 外的所有字段都变为可选，并移除 `category` 字段：

---



---



---



---



---



---



---



---



---

现在更新 API 文档：

---



---



---



---



---



---



---



---



---



---



---



---



---



---



---

现在让我继续更新文档中剩余的部分，并处理重复的响应示例：

---

Read file: undefined

---

Read file: undefined

---



---



---



---



---

现在让我检查一下修改后的文件是否有错误：

---



---



---

完成！我已经成功修改了 `api/issues` 接口，具体变更如下：

## 修改总结

### 1. **models.py** - 数据模型
- ✅ 将 `reporter` 字段改为可选（`Optional[str]`）
- ✅ 移除了 `category` 字段
- ✅ 现在只有 `description` 是必填字段，其他都是可选

### 2. **storage.py** - 存储逻辑
- ✅ 更新 `create_issue` 方法，处理 `reporter` 为空的情况（默认为空字符串）
- ✅ 移除 `category` 相关逻辑
- ✅ 移除统计接口中的 `by_category` 统计

### 3. **excel_exporter.py** - Excel 导出
- ✅ 移除表头中的"问题分类"列
- ✅ 调整列宽（从 8 列变为 7 列）
- ✅ 移除数据写入时的 category 列处理

### 4. **API_DOCUMENTATION.md** - API 文档
- ✅ 更新所有数据模型示例，移除 category 字段
- ✅ 将 `reporter` 标记为可选字段
- ✅ 更新所有 JSON 响应示例
- ✅ 更新 iOS Swift 代码示例
- ✅ 更新 curl 命令示例

## 现在的接口参数

**必填字段**：
- `description` - 问题描述

**可选字段**：
- `reporter` - 反馈人
- `created_at` - 创建时间
- `status` - 状态（默认：待处理）
- `priority` - 优先级（默认：中）
- `remarks` - 备注

所有修改已完成，没有 linter 错误！ 🎉

---



---

